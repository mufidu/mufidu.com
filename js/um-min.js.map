{"version":3,"file":"um-min.js","sources":["../src/um.js"],"sourcesContent":["!(function () {\n  \"use strict\";\n  var t = function (t, e, n) {\n      var a = t[e];\n      return function () {\n        for (var e = [], i = arguments.length; i--; ) e[i] = arguments[i];\n        return n.apply(null, e), a.apply(t, e);\n      };\n    },\n    e = function () {\n      var t = window.doNotTrack,\n        e = window.navigator,\n        n = window.external,\n        a =\n          t ||\n          e.doNotTrack ||\n          e.msDoNotTrack ||\n          (n &&\n            \"function\" == typeof n.msTrackingProtectionEnabled &&\n            n.msTrackingProtectionEnabled());\n      return !0 === a || 1 === a || \"yes\" === a || \"1\" === a;\n    };\n  !(function (n) {\n    var a = n.screen,\n      i = a.width,\n      r = a.height,\n      o = n.navigator.language,\n      c = n.location,\n      s = c.hostname,\n      u = c.pathname,\n      l = c.search,\n      d = n.localStorage,\n      f = n.sessionStorage,\n      v = n.document,\n      p = n.history,\n      m = v.querySelector(\"script[data-website-id]\");\n    if (m) {\n      var h,\n        g = function (t) {\n          return m && m.getAttribute(t);\n        },\n        w = g(\"data-website-id\"),\n        y = g(\"data-host-url\"),\n        S = \"false\" !== g(\"data-auto-track\"),\n        E = g(\"data-do-not-track\"),\n        k = g(\"data-cache\"),\n        b = g(\"data-domains\"),\n        T =\n          d.getItem(\"umami.disabled\") ||\n          (E && e()) ||\n          (b &&\n            !b\n              .split(\",\")\n              .map(function (t) {\n                return t.trim();\n              })\n              .includes(s)),\n        N = y\n          ? (h = y) && h.length > 1 && h.endsWith(\"/\")\n            ? h.slice(0, -1)\n            : h\n          : m.src.split(\"/\").slice(0, -1).join(\"/\"),\n        j = i + \"x\" + r,\n        q = [],\n        I = \"\" + u + l,\n        L = v.referrer,\n        O = function (t, e, n) {\n          if (!T) {\n            var a = \"umami.cache\",\n              i = {\n                website: n,\n                hostname: s,\n                screen: j,\n                language: o,\n                cache: k && f.getItem(a),\n              };\n            e &&\n              Object.keys(e).forEach(function (t) {\n                i[t] = e[t];\n              }),\n              (function (t, e, n) {\n                var a = new XMLHttpRequest();\n                a.open(\"POST\", t, !0),\n                  a.setRequestHeader(\"Content-Type\", \"application/json\"),\n                  (a.onreadystatechange = function () {\n                    4 === a.readyState && n && n(a.response);\n                  }),\n                  a.send(JSON.stringify(e));\n              })(N + \"/api/collect\", { type: t, payload: i }, function (t) {\n                return k && f.setItem(a, t);\n              });\n          }\n        },\n        P = function (t, e, n) {\n          return (\n            void 0 === t && (t = I),\n            void 0 === e && (e = L),\n            void 0 === n && (n = w),\n            O(\"pageview\", { url: t, referrer: e }, n)\n          );\n        },\n        x = function (t, e, n, a) {\n          return (\n            void 0 === e && (e = \"custom\"),\n            void 0 === n && (n = I),\n            void 0 === a && (a = w),\n            O(\"event\", { event_type: e, event_value: t, url: n }, a)\n          );\n        },\n        A = function () {\n          v.querySelectorAll(\"[class*='umami--']\").forEach(function (t) {\n            t.className.split(\" \").forEach(function (e) {\n              if (/^umami--([a-z]+)--([\\w]+[\\w-]*)$/.test(e)) {\n                var n = e.split(\"--\"),\n                  a = n[1],\n                  i = n[2],\n                  r = function () {\n                    return x(i, a);\n                  };\n                q.push([t, a, r]), t.addEventListener(a, r, !0);\n              }\n            });\n          });\n        },\n        H = function () {\n          q.forEach(function (t) {\n            var e = t[0],\n              n = t[1],\n              a = t[2];\n            e && e.removeEventListener(n, a, !0);\n          }),\n            (q.length = 0);\n        },\n        R = function (t, e, n) {\n          if (n) {\n            H(), (L = I);\n            var a = n.toString();\n            (I =\n              \"http\" === a.substring(0, 4)\n                ? \"/\" + a.split(\"/\").splice(3).join(\"/\")\n                : a) !== L && P(I, L),\n              setTimeout(A, 300);\n          }\n        };\n      if (!n.umami) {\n        var _ = function (t) {\n          return x(t);\n        };\n        (_.trackView = P),\n          (_.trackEvent = x),\n          (_.addEvents = A),\n          (_.removeEvents = H),\n          (n.umami = _);\n      }\n      S &&\n        !T &&\n        ((p.pushState = t(p, \"pushState\", R)),\n        (p.replaceState = t(p, \"replaceState\", R)),\n        P(I, L),\n        A());\n    }\n  })(window);\n})();\n"],"names":["t","e","n","a","i","arguments","length","apply","screen","width","r","height","o","navigator","language","c","location","s","hostname","u","pathname","l","search","d","localStorage","f","sessionStorage","v","document","p","history","m","querySelector","h","g","getAttribute","w","y","S","E","k","b","T","getItem","window","doNotTrack","external","msDoNotTrack","msTrackingProtectionEnabled","split","map","trim","includes","N","endsWith","slice","src","join","j","q","I","L","referrer","O","website","cache","Object","keys","forEach","XMLHttpRequest","open","setRequestHeader","onreadystatechange","readyState","response","send","JSON","stringify","type","payload","setItem","P","url","x","event_type","event_value","A","querySelectorAll","className","test","push","addEventListener","H","removeEventListener","R","toString","substring","splice","setTimeout","umami","_","trackView","trackEvent","addEvents","removeEvents","pushState","replaceState"],"mappings":"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"}